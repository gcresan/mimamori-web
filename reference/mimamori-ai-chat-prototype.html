<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AIãƒãƒ£ãƒƒãƒˆ - è¦‹å®ˆã‚Šã‚¦ã‚§ãƒ–</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    :root {
      /* è¦‹å®ˆã‚Šã‚¦ã‚§ãƒ–ã‚«ãƒ©ãƒ¼ */
      --primary-blue: #4a6d7c;
      --primary-teal: #7db5b3;
      --soft-gray: #8c9199;
      
      --bg-primary: #ffffff;
      --bg-secondary: #f8f9fa;
      --bg-tertiary: #f0f2f4;
      
      --text-primary: #1a202c;
      --text-secondary: #4a5568;
      --text-tertiary: #718096;
      
      --border-light: #e8eaed;
      --border-medium: #d1d5db;
      
      --accent-positive: #7db5b3;
      --accent-ai: #4a6d7c;
      
      --shadow-soft: 0 1px 3px rgba(0,0,0,0.04);
      --shadow-card: 0 1px 4px rgba(0,0,0,0.06);
      --shadow-float: 0 4px 12px rgba(0,0,0,0.12);
      --shadow-modal: 0 8px 32px rgba(0,0,0,0.16);
    }
    
    body { 
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Hiragino Sans', sans-serif;
      background: var(--bg-secondary); 
      color: var(--text-primary);
      line-height: 1.6;
      padding: 20px;
    }
    
    /* ãƒ‡ãƒ¢ç”¨ç®¡ç†ç”»é¢ã®ç°¡æ˜“ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ */
    .demo-dashboard {
      max-width: 1400px;
      margin: 0 auto;
      background: var(--bg-primary);
      border-radius: 12px;
      padding: 40px;
      min-height: 80vh;
      box-shadow: var(--shadow-card);
    }
    
    .demo-title {
      font-size: 24px;
      font-weight: 600;
      color: var(--text-primary);
      margin-bottom: 16px;
    }
    
    .demo-content {
      font-size: 14px;
      color: var(--text-secondary);
      line-height: 1.8;
    }
    
    /* ========================================
       1) å³ä¸‹FABï¼ˆãƒ•ãƒ­ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ï¼‰
       ======================================== */
    .chat-fab {
      position: fixed;
      bottom: 24px;
      right: 24px;
      width: 160px;
      height: 56px;
      background: linear-gradient(135deg, var(--primary-blue) 0%, var(--primary-teal) 100%);
      border-radius: 28px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      color: #fff;
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      box-shadow: var(--shadow-float);
      transition: all 0.3s ease;
      z-index: 1000;
    }
    
    .chat-fab:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 20px rgba(74, 109, 124, 0.3);
    }
    
    .chat-fab-icon {
      font-size: 24px;
    }
    
    .chat-fab-badge {
      position: absolute;
      top: -4px;
      right: -4px;
      width: 20px;
      height: 20px;
      background: #ef4444;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 11px;
      font-weight: 700;
      color: #fff;
      border: 2px solid var(--bg-secondary);
    }
    
    .chat-fab.hidden {
      display: none;
    }
    
    /* ========================================
       2) ãƒãƒ£ãƒƒãƒˆã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ï¼ˆé€šå¸¸ã‚µã‚¤ã‚ºï¼‰
       ======================================== */
    .chat-window {
      position: fixed;
      bottom: 24px;
      right: 24px;
      width: 400px;
      height: 600px;
      background: var(--bg-primary);
      border-radius: 16px;
      box-shadow: var(--shadow-modal);
      display: flex;
      flex-direction: column;
      overflow: hidden;
      z-index: 1001;
      transform: scale(0.9) translateY(20px);
      opacity: 0;
      pointer-events: none;
      transition: all 0.3s ease;
    }
    
    .chat-window.open {
      transform: scale(1) translateY(0);
      opacity: 1;
      pointer-events: all;
    }
    
    /* ========================================
       3) ãƒãƒ£ãƒƒãƒˆãƒ˜ãƒƒãƒ€ãƒ¼
       ======================================== */
    .chat-header {
      background: linear-gradient(135deg, var(--primary-blue) 0%, var(--primary-teal) 100%);
      color: #fff;
      padding: 20px;
      border-radius: 16px 16px 0 0;
    }
    
    .chat-header-top {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 8px;
    }
    
    .chat-header-title {
      font-size: 18px;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .chat-header-actions {
      display: flex;
      gap: 8px;
    }
    
    .chat-header-btn {
      width: 32px;
      height: 32px;
      background: rgba(255,255,255,0.2);
      border: none;
      border-radius: 8px;
      color: #fff;
      font-size: 16px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s;
    }
    
    .chat-header-btn:hover {
      background: rgba(255,255,255,0.3);
    }
    
    .chat-header-subtitle {
      font-size: 13px;
      color: rgba(255,255,255,0.9);
      margin-bottom: 6px;
    }
    
    .chat-header-status {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-size: 12px;
      color: rgba(255,255,255,0.95);
      background: rgba(255,255,255,0.15);
      padding: 4px 10px;
      border-radius: 12px;
    }
    
    .status-dot {
      width: 6px;
      height: 6px;
      background: #10b981;
      border-radius: 50%;
      animation: pulse 2s infinite;
    }
    
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }
    
    /* ========================================
       4) ã‚¯ã‚¤ãƒƒã‚¯è³ªå•ãƒãƒƒãƒ—
       ======================================== */
    .quick-questions {
      padding: 16px 20px;
      background: var(--bg-secondary);
      border-bottom: 1px solid var(--border-light);
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }
    
    .quick-chip {
      background: var(--bg-primary);
      border: 1px solid var(--border-light);
      border-radius: 16px;
      padding: 6px 14px;
      font-size: 13px;
      color: var(--text-secondary);
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .quick-chip:hover {
      background: var(--primary-teal);
      color: #fff;
      border-color: var(--primary-teal);
    }
    
    /* ========================================
       5) ä¼šè©±ã‚¨ãƒªã‚¢
       ======================================== */
    .chat-messages {
      flex: 1;
      overflow-y: auto;
      padding: 20px;
      display: flex;
      flex-direction: column;
      gap: 16px;
    }
    
    .chat-messages::-webkit-scrollbar {
      width: 6px;
    }
    
    .chat-messages::-webkit-scrollbar-thumb {
      background: var(--border-medium);
      border-radius: 3px;
    }
    
    /* ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒãƒ–ãƒ« */
    .message {
      display: flex;
      gap: 12px;
      animation: fadeInUp 0.3s ease;
    }
    
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    .message.user {
      flex-direction: row-reverse;
    }
    
    .message-avatar {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      flex-shrink: 0;
    }
    
    .message.ai .message-avatar {
      background: linear-gradient(135deg, var(--primary-blue) 0%, var(--primary-teal) 100%);
      color: #fff;
    }
    
    .message.user .message-avatar {
      background: var(--bg-tertiary);
      color: var(--text-secondary);
    }
    
    .message-content {
      flex: 1;
      max-width: 75%;
    }
    
    .message-bubble {
      padding: 12px 16px;
      border-radius: 12px;
      font-size: 14px;
      line-height: 1.6;
    }
    
    .message.ai .message-bubble {
      background: var(--bg-secondary);
      color: var(--text-primary);
      border-radius: 12px 12px 12px 4px;
    }
    
    .message.user .message-bubble {
      background: var(--primary-blue);
      color: #fff;
      border-radius: 12px 12px 4px 12px;
    }
    
    .message-time {
      font-size: 11px;
      color: var(--text-tertiary);
      margin-top: 4px;
      padding: 0 4px;
    }
    
    /* AIå›ç­”ã®æ§‹é€ åŒ–è¡¨ç¤º */
    .ai-answer {
      background: var(--bg-primary);
      border: 1px solid var(--border-light);
      border-radius: 12px;
      padding: 16px;
      margin-top: 8px;
    }
    
    .ai-answer-section {
      margin-bottom: 16px;
    }
    
    .ai-answer-section:last-child {
      margin-bottom: 0;
    }
    
    .ai-answer-title {
      font-size: 13px;
      font-weight: 600;
      color: var(--primary-blue);
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 6px;
    }
    
    .ai-answer-text {
      font-size: 14px;
      color: var(--text-secondary);
      line-height: 1.7;
    }
    
    .ai-answer-list {
      list-style: none;
      padding: 0;
    }
    
    .ai-answer-list li {
      padding: 6px 0;
      padding-left: 20px;
      position: relative;
      font-size: 14px;
      color: var(--text-secondary);
    }
    
    .ai-answer-list li:before {
      content: "â—";
      position: absolute;
      left: 4px;
      color: var(--primary-teal);
      font-size: 12px;
    }
    
    /* è©•ä¾¡ãƒœã‚¿ãƒ³ */
    .message-actions {
      display: flex;
      gap: 8px;
      margin-top: 8px;
      padding: 0 4px;
    }
    
    .feedback-btn {
      background: none;
      border: 1px solid var(--border-light);
      border-radius: 6px;
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 16px;
      transition: all 0.2s;
    }
    
    .feedback-btn:hover {
      background: var(--bg-secondary);
      border-color: var(--border-medium);
    }
    
    /* ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚° */
    .loading-message {
      display: flex;
      gap: 12px;
    }
    
    .loading-dots {
      display: flex;
      gap: 4px;
      padding: 12px 16px;
      background: var(--bg-secondary);
      border-radius: 12px;
    }
    
    .loading-dot {
      width: 8px;
      height: 8px;
      background: var(--primary-teal);
      border-radius: 50%;
      animation: bounce 1.4s infinite;
    }
    
    .loading-dot:nth-child(2) {
      animation-delay: 0.2s;
    }
    
    .loading-dot:nth-child(3) {
      animation-delay: 0.4s;
    }
    
    @keyframes bounce {
      0%, 80%, 100% { transform: scale(0.8); opacity: 0.5; }
      40% { transform: scale(1.2); opacity: 1; }
    }
    
    /* ========================================
       6) å…¥åŠ›ã‚¨ãƒªã‚¢
       ======================================== */
    .chat-input-area {
      border-top: 1px solid var(--border-light);
      padding: 16px 20px;
      background: var(--bg-primary);
    }
    
    .chat-input-options {
      display: flex;
      gap: 16px;
      margin-bottom: 12px;
      font-size: 13px;
    }
    
    .input-option {
      display: flex;
      align-items: center;
      gap: 6px;
      color: var(--text-secondary);
      cursor: pointer;
      user-select: none;
    }
    
    .input-option input[type="checkbox"] {
      width: 16px;
      height: 16px;
      cursor: pointer;
    }
    
    .chat-input-wrapper {
      display: flex;
      gap: 8px;
      align-items: flex-end;
    }
    
    .chat-input {
      flex: 1;
      min-height: 40px;
      max-height: 120px;
      padding: 10px 14px;
      border: 2px solid var(--border-light);
      border-radius: 12px;
      font-size: 14px;
      font-family: inherit;
      resize: vertical;
      transition: all 0.2s;
    }
    
    .chat-input:focus {
      outline: none;
      border-color: var(--primary-teal);
      box-shadow: 0 0 0 3px rgba(125, 181, 179, 0.1);
    }
    
    .chat-input-btn {
      width: 40px;
      height: 40px;
      border: none;
      border-radius: 10px;
      font-size: 18px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s;
      flex-shrink: 0;
    }
    
    .chat-input-btn.secondary {
      background: var(--bg-secondary);
      color: var(--text-secondary);
    }
    
    .chat-input-btn.secondary:hover {
      background: var(--bg-tertiary);
    }
    
    .chat-input-btn.primary {
      background: var(--primary-blue);
      color: #fff;
    }
    
    .chat-input-btn.primary:hover {
      background: var(--primary-teal);
    }
    
    /* ========================================
       7) æ‹¡å¤§è¡¨ç¤º - ä¸­å¤®ãƒ¢ãƒ¼ãƒ€ãƒ«ç‰ˆ
       ======================================== */
    .chat-modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0,0,0,0.5);
      z-index: 2000;
      display: none;
      align-items: center;
      justify-content: center;
      padding: 40px;
    }
    
    .chat-modal-overlay.open {
      display: flex;
    }
    
    .chat-window-large {
      width: 100%;
      max-width: 900px;
      height: 85vh;
      background: var(--bg-primary);
      border-radius: 16px;
      box-shadow: var(--shadow-modal);
      display: flex;
      flex-direction: column;
      overflow: hidden;
      animation: modalFadeIn 0.3s ease;
    }
    
    @keyframes modalFadeIn {
      from {
        opacity: 0;
        transform: scale(0.95);
      }
      to {
        opacity: 1;
        transform: scale(1);
      }
    }
    
    /* æ‹¡å¤§æ™‚ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å¹…èª¿æ•´ */
    .chat-window-large .message-content {
      max-width: 80%;
    }
    
    /* ========================================
       8) æ‹¡å¤§è¡¨ç¤º - å³å´ãƒ‘ãƒãƒ«ç‰ˆ
       ======================================== */
    .chat-panel-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0,0,0,0.3);
      z-index: 2000;
      display: none;
    }
    
    .chat-panel-overlay.open {
      display: block;
    }
    
    .chat-window-panel {
      position: fixed;
      top: 0;
      right: 0;
      width: 720px;
      height: 100vh;
      background: var(--bg-primary);
      box-shadow: -4px 0 24px rgba(0,0,0,0.12);
      display: flex;
      flex-direction: column;
      overflow: hidden;
      transform: translateX(100%);
      transition: transform 0.3s ease;
      z-index: 2001;
    }
    
    .chat-panel-overlay.open .chat-window-panel {
      transform: translateX(0);
    }
    
    /* ========================================
       9) æ­“è¿ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
       ======================================== */
    .welcome-message {
      text-align: center;
      padding: 32px 20px;
    }
    
    .welcome-icon {
      font-size: 48px;
      margin-bottom: 16px;
    }
    
    .welcome-title {
      font-size: 18px;
      font-weight: 600;
      color: var(--text-primary);
      margin-bottom: 8px;
    }
    
    .welcome-text {
      font-size: 14px;
      color: var(--text-secondary);
      line-height: 1.7;
    }
    
    /* ========================================
       10) ã‚¨ãƒ©ãƒ¼è¡¨ç¤º
       ======================================== */
    .error-message {
      background: #fef2f2;
      border: 1px solid #fecaca;
      border-radius: 12px;
      padding: 16px;
      margin: 16px 20px;
      display: flex;
      align-items: flex-start;
      gap: 12px;
    }
    
    .error-icon {
      font-size: 20px;
      color: #dc2626;
      flex-shrink: 0;
    }
    
    .error-content {
      flex: 1;
    }
    
    .error-title {
      font-size: 14px;
      font-weight: 600;
      color: #991b1b;
      margin-bottom: 4px;
    }
    
    .error-text {
      font-size: 13px;
      color: #dc2626;
      margin-bottom: 8px;
    }
    
    .error-retry {
      background: #dc2626;
      color: #fff;
      border: none;
      border-radius: 6px;
      padding: 6px 14px;
      font-size: 13px;
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .error-retry:hover {
      background: #b91c1c;
    }
    
    /* ========================================
       11) ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–
       ======================================== */
    @media (max-width: 768px) {
      .chat-window {
        bottom: 0;
        right: 0;
        left: 0;
        width: 100%;
        height: 100vh;
        border-radius: 0;
      }
      
      .chat-fab {
        width: 56px;
        height: 56px;
        border-radius: 50%;
      }
      
      .chat-fab-text {
        display: none;
      }
      
      .chat-window-large {
        max-width: 100%;
        height: 100vh;
        border-radius: 0;
      }
      
      .chat-window-panel {
        width: 100%;
      }
    }
    
    /* ========================================
       12) ãƒ‡ãƒ¢åˆ‡æ›¿ãƒœã‚¿ãƒ³
       ======================================== */
    .demo-controls {
      position: fixed;
      top: 20px;
      right: 20px;
      display: flex;
      gap: 12px;
      z-index: 999;
    }
    
    .demo-btn {
      background: var(--bg-primary);
      border: 1px solid var(--border-light);
      border-radius: 8px;
      padding: 10px 16px;
      font-size: 13px;
      font-weight: 500;
      color: var(--text-primary);
      cursor: pointer;
      box-shadow: var(--shadow-card);
      transition: all 0.2s;
    }
    
    .demo-btn:hover {
      background: var(--bg-secondary);
      border-color: var(--border-medium);
    }
    
    .demo-btn.active {
      background: var(--primary-blue);
      color: #fff;
      border-color: var(--primary-blue);
    }
  </style>
</head>
<body>
  <!-- ãƒ‡ãƒ¢ç”¨ç®¡ç†ç”»é¢ -->
  <div class="demo-dashboard">
    <h1 class="demo-title">ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</h1>
    <div class="demo-content">
      <p>ã“ã“ã«ç®¡ç†ç”»é¢ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</p>
      <p>å³ä¸‹ã®AIãƒãƒ£ãƒƒãƒˆãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãã ã•ã„ã€‚</p>
    </div>
  </div>

  <!-- ãƒ‡ãƒ¢åˆ‡æ›¿ãƒœã‚¿ãƒ³ -->
  <div class="demo-controls">
    <button class="demo-btn active" onclick="showState('normal')">é€šå¸¸ã‚µã‚¤ã‚º</button>
    <button class="demo-btn" onclick="showState('modal')">æ‹¡å¤§ï¼ˆãƒ¢ãƒ¼ãƒ€ãƒ«ï¼‰</button>
    <button class="demo-btn" onclick="showState('panel')">æ‹¡å¤§ï¼ˆãƒ‘ãƒãƒ«ï¼‰</button>
  </div>

  <!-- 1) FAB -->
  <div class="chat-fab" id="chatFab" onclick="openChat()">
    <span class="chat-fab-icon">ğŸ¤–</span>
    <span class="chat-fab-text">AIç›¸è«‡</span>
    <span class="chat-fab-badge">1</span>
  </div>

  <!-- 2) ãƒãƒ£ãƒƒãƒˆã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ï¼ˆé€šå¸¸ã‚µã‚¤ã‚ºï¼‰ -->
  <div class="chat-window" id="chatWindow">
    <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
    <div class="chat-header">
      <div class="chat-header-top">
        <div class="chat-header-title">
          <span>ğŸ¤–</span>
          <span>ã¿ã¾ã‚‚ã‚ŠAI</span>
        </div>
        <div class="chat-header-actions">
          <button class="chat-header-btn" onclick="expandChat('modal')" title="æ‹¡å¤§è¡¨ç¤º">â¤¢</button>
          <button class="chat-header-btn" onclick="closeChat()" title="é–‰ã˜ã‚‹">âœ•</button>
        </div>
      </div>
      <div class="chat-header-subtitle">æ•°å­—ã®è¦‹æ–¹ãƒ»æ”¹å–„æ¡ˆã‚’ã‚„ã•ã—ãæ¡ˆå†…</div>
      <div class="chat-header-status">
        <span class="status-dot"></span>
        <span>ç›¸è«‡å—ä»˜ä¸­</span>
      </div>
    </div>

    <!-- ã‚¯ã‚¤ãƒƒã‚¯è³ªå• -->
    <div class="quick-questions">
      <div class="quick-chip" onclick="insertQuestion('CTRã£ã¦ä½•ï¼Ÿ')">CTRã£ã¦ä½•ï¼Ÿ</div>
      <div class="quick-chip" onclick="insertQuestion('ã“ã®æ•°å­—ã¯è‰¯ã„ã§ã™ã‹ï¼Ÿ')">ã“ã®æ•°å­—ã¯è‰¯ã„ã§ã™ã‹ï¼Ÿ</div>
      <div class="quick-chip" onclick="insertQuestion('ä»Šæœˆã‚„ã‚‹ã“ã¨ã‚’3ã¤æ•™ãˆã¦')">ä»Šæœˆã‚„ã‚‹ã“ã¨ã‚’3ã¤</div>
    </div>

    <!-- ä¼šè©±ã‚¨ãƒªã‚¢ -->
    <div class="chat-messages" id="chatMessages">
      <!-- æ­“è¿ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ -->
      <div class="welcome-message">
        <div class="welcome-icon">ğŸ‘‹</div>
        <div class="welcome-title">ã“ã‚“ã«ã¡ã¯ï¼</div>
        <div class="welcome-text">
          ã‚¢ã‚¯ã‚»ã‚¹è§£æã‚„æ”¹å–„ã«ã¤ã„ã¦ãŠæ°—è»½ã«ã”è³ªå•ãã ã•ã„ã€‚<br>
          æ•°å­—ã®æ„å‘³ã‹ã‚‰å…·ä½“çš„ãªæ”¹å–„æ¡ˆã¾ã§ã€ã‚ã‹ã‚Šã‚„ã™ããŠç­”ãˆã—ã¾ã™ã€‚
        </div>
      </div>
    </div>

    <!-- å…¥åŠ›ã‚¨ãƒªã‚¢ -->
    <div class="chat-input-area">
      <div class="chat-input-options">
        <label class="input-option">
          <input type="checkbox" id="useScreenshot">
          <span>ã“ã®ãƒšãƒ¼ã‚¸ã‚’è¦‹ã¦å›ç­”</span>
        </label>
        <label class="input-option">
          <input type="checkbox" id="useDetailedData">
          <span>è©³ç´°ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ã†</span>
        </label>
      </div>
      <div class="chat-input-wrapper">
        <textarea 
          class="chat-input" 
          id="chatInput"
          placeholder="ã€Œã“ã®æ•°å­—ã®æ„å‘³ã¯ï¼Ÿã€ã€Œå…ˆæœˆã‚ˆã‚Šè½ã¡ã¦ã„ã‚‹ç†ç”±ã¯ï¼Ÿã€"
          rows="1"
        ></textarea>
        <button class="chat-input-btn secondary" onclick="voiceInput()" title="éŸ³å£°å…¥åŠ›">ğŸ¤</button>
        <button class="chat-input-btn primary" onclick="sendMessage()" title="é€ä¿¡">â¤</button>
      </div>
    </div>
  </div>

  <!-- 3) æ‹¡å¤§è¡¨ç¤º - ä¸­å¤®ãƒ¢ãƒ¼ãƒ€ãƒ«ç‰ˆ -->
  <div class="chat-modal-overlay" id="chatModalOverlay" onclick="closeExpanded()">
    <div class="chat-window-large" onclick="event.stopPropagation()">
      <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
      <div class="chat-header">
        <div class="chat-header-top">
          <div class="chat-header-title">
            <span>ğŸ¤–</span>
            <span>ã¿ã¾ã‚‚ã‚ŠAI</span>
          </div>
          <div class="chat-header-actions">
            <button class="chat-header-btn" onclick="collapseChat()" title="é€šå¸¸ã‚µã‚¤ã‚ºã«æˆ»ã™">â¤¡</button>
            <button class="chat-header-btn" onclick="closeExpanded()" title="é–‰ã˜ã‚‹">âœ•</button>
          </div>
        </div>
        <div class="chat-header-subtitle">æ•°å­—ã®è¦‹æ–¹ãƒ»æ”¹å–„æ¡ˆã‚’ã‚„ã•ã—ãæ¡ˆå†…</div>
        <div class="chat-header-status">
          <span class="status-dot"></span>
          <span>ç›¸è«‡å—ä»˜ä¸­</span>
        </div>
      </div>

      <!-- ã‚¯ã‚¤ãƒƒã‚¯è³ªå• -->
      <div class="quick-questions">
        <div class="quick-chip" onclick="insertQuestion('CTRã£ã¦ä½•ï¼Ÿ')">CTRã£ã¦ä½•ï¼Ÿ</div>
        <div class="quick-chip" onclick="insertQuestion('ã“ã®æ•°å­—ã¯è‰¯ã„ã§ã™ã‹ï¼Ÿ')">ã“ã®æ•°å­—ã¯è‰¯ã„ã§ã™ã‹ï¼Ÿ</div>
        <div class="quick-chip" onclick="insertQuestion('ä»Šæœˆã‚„ã‚‹ã“ã¨ã‚’3ã¤æ•™ãˆã¦')">ä»Šæœˆã‚„ã‚‹ã“ã¨ã‚’3ã¤</div>
        <div class="quick-chip" onclick="insertQuestion('ã“ã®ãƒšãƒ¼ã‚¸ã®æ”¹å–„ç‚¹ã‚’æ•™ãˆã¦')">ã“ã®ãƒšãƒ¼ã‚¸ã®æ”¹å–„ç‚¹</div>
      </div>

      <!-- ä¼šè©±ã‚¨ãƒªã‚¢ï¼ˆã‚µãƒ³ãƒ—ãƒ«ä¼šè©±ï¼‰ -->
      <div class="chat-messages" id="chatMessagesModal">
        <!-- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ -->
        <div class="message user">
          <div class="message-avatar">ğŸ‘¤</div>
          <div class="message-content">
            <div class="message-bubble">
              å…ˆæœˆã‚ˆã‚Šã‚¢ã‚¯ã‚»ã‚¹ãŒè½ã¡ã¦ã‚‹ã®ã¯ãªãœï¼Ÿ
            </div>
            <div class="message-time">14:23</div>
          </div>
        </div>

        <!-- AIå›ç­” -->
        <div class="message ai">
          <div class="message-avatar">ğŸ¤–</div>
          <div class="message-content">
            <div class="message-bubble">
              ç¢ºèªã—ã¾ã—ãŸã€‚æ¤œç´¢ã‹ã‚‰ã®æµå…¥ãŒæ¸›ã£ãŸã“ã¨ãŒä¸»ãªåŸå› ã§ã™ã€‚
            </div>
            <div class="ai-answer">
              <div class="ai-answer-section">
                <div class="ai-answer-title">ğŸ“Š çµè«–</div>
                <div class="ai-answer-text">
                  æ¤œç´¢ã‹ã‚‰ã®æµå…¥ãŒæ¸›ã£ãŸã“ã¨ãŒä¸»ãªåŸå› ã§ã™ã€‚
                </div>
              </div>
              
              <div class="ai-answer-section">
                <div class="ai-answer-title">ğŸ’¡ ç†ç”±</div>
                <ul class="ai-answer-list">
                  <li>ä¸€éƒ¨ã®æ¤œç´¢ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã®è¡¨ç¤ºå›æ•°ãŒä¸‹ãŒã£ã¦ã„ã¾ã™</li>
                  <li>ä¸»è¦ãƒšãƒ¼ã‚¸ã®ã‚¯ãƒªãƒƒã‚¯ç‡ãŒå°‘ã—ä¸‹ãŒã£ã¦ã„ã¾ã™</li>
                  <li>å•ã„åˆã‚ã›ãƒšãƒ¼ã‚¸ã¸ã®æµå…¥ã‚‚æ¸›ã£ã¦ã„ã¾ã™</li>
                </ul>
              </div>
              
              <div class="ai-answer-section">
                <div class="ai-answer-title">âœ… ä»Šã™ãã‚„ã‚‹ã“ã¨</div>
                <ul class="ai-answer-list">
                  <li>ã‚¿ã‚¤ãƒˆãƒ«ã‚’è¦‹ç›´ã™</li>
                  <li>ä¸»è¦ãƒšãƒ¼ã‚¸ã«å†…éƒ¨ãƒªãƒ³ã‚¯ã‚’è¿½åŠ ã™ã‚‹</li>
                  <li>å•ã„åˆã‚ã›å°ç·šã‚’ç›®ç«‹ãŸã›ã‚‹</li>
                </ul>
              </div>
              
              <div class="ai-answer-section">
                <div class="ai-answer-title">ğŸ“ˆ æ¬¡ã«è¦‹ã‚‹æ•°å­—</div>
                <ul class="ai-answer-list">
                  <li>æ¤œç´¢ã‚¯ãƒªãƒƒã‚¯æ•°</li>
                  <li>ä¸»è¦ãƒšãƒ¼ã‚¸ã®CTR</li>
                  <li>å•ã„åˆã‚ã›ãƒšãƒ¼ã‚¸ã®é–²è¦§æ•°</li>
                </ul>
              </div>
            </div>
            <div class="message-actions">
              <button class="feedback-btn" title="å½¹ã«ç«‹ã£ãŸ">ğŸ‘</button>
              <button class="feedback-btn" title="å½¹ã«ç«‹ãŸãªã‹ã£ãŸ">ğŸ‘</button>
            </div>
            <div class="message-time">14:24</div>
          </div>
        </div>
      </div>

      <!-- å…¥åŠ›ã‚¨ãƒªã‚¢ -->
      <div class="chat-input-area">
        <div class="chat-input-options">
          <label class="input-option">
            <input type="checkbox" checked>
            <span>ã“ã®ãƒšãƒ¼ã‚¸ã‚’è¦‹ã¦å›ç­”</span>
          </label>
          <label class="input-option">
            <input type="checkbox">
            <span>è©³ç´°ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ã†</span>
          </label>
        </div>
        <div class="chat-input-wrapper">
          <textarea 
            class="chat-input" 
            placeholder="ã€Œã“ã®æ•°å­—ã®æ„å‘³ã¯ï¼Ÿã€ã€Œå…ˆæœˆã‚ˆã‚Šè½ã¡ã¦ã„ã‚‹ç†ç”±ã¯ï¼Ÿã€"
            rows="1"
          ></textarea>
          <button class="chat-input-btn secondary" title="éŸ³å£°å…¥åŠ›">ğŸ¤</button>
          <button class="chat-input-btn primary" title="é€ä¿¡">â¤</button>
        </div>
      </div>
    </div>
  </div>

  <!-- 4) æ‹¡å¤§è¡¨ç¤º - å³å´ãƒ‘ãƒãƒ«ç‰ˆ -->
  <div class="chat-panel-overlay" id="chatPanelOverlay" onclick="closeExpanded()">
    <div class="chat-window-panel" onclick="event.stopPropagation()">
      <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
      <div class="chat-header">
        <div class="chat-header-top">
          <div class="chat-header-title">
            <span>ğŸ¤–</span>
            <span>ã¿ã¾ã‚‚ã‚ŠAI</span>
          </div>
          <div class="chat-header-actions">
            <button class="chat-header-btn" onclick="collapseChat()" title="é€šå¸¸ã‚µã‚¤ã‚ºã«æˆ»ã™">â¤¡</button>
            <button class="chat-header-btn" onclick="closeExpanded()" title="é–‰ã˜ã‚‹">âœ•</button>
          </div>
        </div>
        <div class="chat-header-subtitle">æ•°å­—ã®è¦‹æ–¹ãƒ»æ”¹å–„æ¡ˆã‚’ã‚„ã•ã—ãæ¡ˆå†…</div>
        <div class="chat-header-status">
          <span class="status-dot"></span>
          <span>ç›¸è«‡å—ä»˜ä¸­</span>
        </div>
      </div>

      <!-- ã‚¯ã‚¤ãƒƒã‚¯è³ªå• -->
      <div class="quick-questions">
        <div class="quick-chip">CTRã£ã¦ä½•ï¼Ÿ</div>
        <div class="quick-chip">ã“ã®æ•°å­—ã¯è‰¯ã„ã§ã™ã‹ï¼Ÿ</div>
        <div class="quick-chip">ä»Šæœˆã‚„ã‚‹ã“ã¨ã‚’3ã¤</div>
        <div class="quick-chip">ã“ã®ãƒšãƒ¼ã‚¸ã®æ”¹å–„ç‚¹</div>
      </div>

      <!-- ä¼šè©±ã‚¨ãƒªã‚¢ï¼ˆã‚µãƒ³ãƒ—ãƒ«ä¼šè©±ï¼‰ -->
      <div class="chat-messages">
        <!-- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ -->
        <div class="message user">
          <div class="message-avatar">ğŸ‘¤</div>
          <div class="message-content">
            <div class="message-bubble">
              å…ˆæœˆã‚ˆã‚Šã‚¢ã‚¯ã‚»ã‚¹ãŒè½ã¡ã¦ã‚‹ã®ã¯ãªãœï¼Ÿ
            </div>
            <div class="message-time">14:23</div>
          </div>
        </div>

        <!-- AIå›ç­”ï¼ˆåŒã˜å†…å®¹ï¼‰ -->
        <div class="message ai">
          <div class="message-avatar">ğŸ¤–</div>
          <div class="message-content">
            <div class="message-bubble">
              ç¢ºèªã—ã¾ã—ãŸã€‚æ¤œç´¢ã‹ã‚‰ã®æµå…¥ãŒæ¸›ã£ãŸã“ã¨ãŒä¸»ãªåŸå› ã§ã™ã€‚
            </div>
            <div class="ai-answer">
              <div class="ai-answer-section">
                <div class="ai-answer-title">ğŸ“Š çµè«–</div>
                <div class="ai-answer-text">
                  æ¤œç´¢ã‹ã‚‰ã®æµå…¥ãŒæ¸›ã£ãŸã“ã¨ãŒä¸»ãªåŸå› ã§ã™ã€‚
                </div>
              </div>
              
              <div class="ai-answer-section">
                <div class="ai-answer-title">ğŸ’¡ ç†ç”±</div>
                <ul class="ai-answer-list">
                  <li>ä¸€éƒ¨ã®æ¤œç´¢ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã®è¡¨ç¤ºå›æ•°ãŒä¸‹ãŒã£ã¦ã„ã¾ã™</li>
                  <li>ä¸»è¦ãƒšãƒ¼ã‚¸ã®ã‚¯ãƒªãƒƒã‚¯ç‡ãŒå°‘ã—ä¸‹ãŒã£ã¦ã„ã¾ã™</li>
                  <li>å•ã„åˆã‚ã›ãƒšãƒ¼ã‚¸ã¸ã®æµå…¥ã‚‚æ¸›ã£ã¦ã„ã¾ã™</li>
                </ul>
              </div>
              
              <div class="ai-answer-section">
                <div class="ai-answer-title">âœ… ä»Šã™ãã‚„ã‚‹ã“ã¨</div>
                <ul class="ai-answer-list">
                  <li>ã‚¿ã‚¤ãƒˆãƒ«ã‚’è¦‹ç›´ã™</li>
                  <li>ä¸»è¦ãƒšãƒ¼ã‚¸ã«å†…éƒ¨ãƒªãƒ³ã‚¯ã‚’è¿½åŠ ã™ã‚‹</li>
                  <li>å•ã„åˆã‚ã›å°ç·šã‚’ç›®ç«‹ãŸã›ã‚‹</li>
                </ul>
              </div>
              
              <div class="ai-answer-section">
                <div class="ai-answer-title">ğŸ“ˆ æ¬¡ã«è¦‹ã‚‹æ•°å­—</div>
                <ul class="ai-answer-list">
                  <li>æ¤œç´¢ã‚¯ãƒªãƒƒã‚¯æ•°</li>
                  <li>ä¸»è¦ãƒšãƒ¼ã‚¸ã®CTR</li>
                  <li>å•ã„åˆã‚ã›ãƒšãƒ¼ã‚¸ã®é–²è¦§æ•°</li>
                </ul>
              </div>
            </div>
            <div class="message-actions">
              <button class="feedback-btn" title="å½¹ã«ç«‹ã£ãŸ">ğŸ‘</button>
              <button class="feedback-btn" title="å½¹ã«ç«‹ãŸãªã‹ã£ãŸ">ğŸ‘</button>
            </div>
            <div class="message-time">14:24</div>
          </div>
        </div>
      </div>

      <!-- å…¥åŠ›ã‚¨ãƒªã‚¢ -->
      <div class="chat-input-area">
        <div class="chat-input-options">
          <label class="input-option">
            <input type="checkbox" checked>
            <span>ã“ã®ãƒšãƒ¼ã‚¸ã‚’è¦‹ã¦å›ç­”</span>
          </label>
          <label class="input-option">
            <input type="checkbox">
            <span>è©³ç´°ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ã†</span>
          </label>
        </div>
        <div class="chat-input-wrapper">
          <textarea 
            class="chat-input" 
            placeholder="ã€Œã“ã®æ•°å­—ã®æ„å‘³ã¯ï¼Ÿã€ã€Œå…ˆæœˆã‚ˆã‚Šè½ã¡ã¦ã„ã‚‹ç†ç”±ã¯ï¼Ÿã€"
            rows="1"
          ></textarea>
          <button class="chat-input-btn secondary" title="éŸ³å£°å…¥åŠ›">ğŸ¤</button>
          <button class="chat-input-btn primary" title="é€ä¿¡">â¤</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    // çŠ¶æ…‹ç®¡ç†
    let currentState = 'closed';
    
    // FABã‚¯ãƒªãƒƒã‚¯
    function openChat() {
      document.getElementById('chatFab').classList.add('hidden');
      document.getElementById('chatWindow').classList.add('open');
      currentState = 'normal';
    }
    
    // é€šå¸¸ãƒãƒ£ãƒƒãƒˆã‚’é–‰ã˜ã‚‹
    function closeChat() {
      document.getElementById('chatWindow').classList.remove('open');
      document.getElementById('chatFab').classList.remove('hidden');
      currentState = 'closed';
    }
    
    // æ‹¡å¤§è¡¨ç¤ºï¼ˆãƒ¢ãƒ¼ãƒ€ãƒ«ï¼‰
    function expandChat(type) {
      if (type === 'modal') {
        document.getElementById('chatWindow').classList.remove('open');
        document.getElementById('chatModalOverlay').classList.add('open');
        currentState = 'modal';
      } else if (type === 'panel') {
        document.getElementById('chatWindow').classList.remove('open');
        document.getElementById('chatPanelOverlay').classList.add('open');
        currentState = 'panel';
      }
    }
    
    // æ‹¡å¤§è¡¨ç¤ºã‚’é–‰ã˜ã‚‹
    function closeExpanded() {
      document.getElementById('chatModalOverlay').classList.remove('open');
      document.getElementById('chatPanelOverlay').classList.remove('open');
      document.getElementById('chatFab').classList.remove('hidden');
      currentState = 'closed';
    }
    
    // é€šå¸¸ã‚µã‚¤ã‚ºã«æˆ»ã™
    function collapseChat() {
      document.getElementById('chatModalOverlay').classList.remove('open');
      document.getElementById('chatPanelOverlay').classList.remove('open');
      document.getElementById('chatWindow').classList.add('open');
      currentState = 'normal';
    }
    
    // ãƒ‡ãƒ¢çŠ¶æ…‹åˆ‡æ›¿
    function showState(state) {
      // ãƒœã‚¿ãƒ³ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ–çŠ¶æ…‹æ›´æ–°
      document.querySelectorAll('.demo-btn').forEach(btn => {
        btn.classList.remove('active');
      });
      event.target.classList.add('active');
      
      // ã™ã¹ã¦é–‰ã˜ã‚‹
      document.getElementById('chatFab').classList.remove('hidden');
      document.getElementById('chatWindow').classList.remove('open');
      document.getElementById('chatModalOverlay').classList.remove('open');
      document.getElementById('chatPanelOverlay').classList.remove('open');
      
      // æŒ‡å®šã®çŠ¶æ…‹ã‚’é–‹ã
      if (state === 'normal') {
        openChat();
      } else if (state === 'modal') {
        document.getElementById('chatFab').classList.add('hidden');
        document.getElementById('chatModalOverlay').classList.add('open');
      } else if (state === 'panel') {
        document.getElementById('chatFab').classList.add('hidden');
        document.getElementById('chatPanelOverlay').classList.add('open');
      }
    }
    
    // ã‚¯ã‚¤ãƒƒã‚¯è³ªå•æŒ¿å…¥
    function insertQuestion(text) {
      document.getElementById('chatInput').value = text;
      document.getElementById('chatInput').focus();
    }
    
    // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡ï¼ˆãƒ‡ãƒ¢ï¼‰
    function sendMessage() {
      const input = document.getElementById('chatInput');
      const text = input.value.trim();
      
      if (!text) return;
      
      // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¿½åŠ 
      const messagesContainer = document.getElementById('chatMessages');
      const userMsg = createUserMessage(text);
      messagesContainer.appendChild(userMsg);
      
      // å…¥åŠ›æ¬„ã‚’ã‚¯ãƒªã‚¢
      input.value = '';
      
      // ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤º
      const loadingMsg = createLoadingMessage();
      messagesContainer.appendChild(loadingMsg);
      messagesContainer.scrollTop = messagesContainer.scrollHeight;
      
      // 3ç§’å¾Œã«AIå›ç­”ã‚’è¡¨ç¤ºï¼ˆãƒ‡ãƒ¢ï¼‰
      setTimeout(() => {
        loadingMsg.remove();
        const aiMsg = createAIMessage();
        messagesContainer.appendChild(aiMsg);
        messagesContainer.scrollTop = messagesContainer.scrollHeight;
      }, 3000);
    }
    
    // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ä½œæˆ
    function createUserMessage(text) {
      const div = document.createElement('div');
      div.className = 'message user';
      div.innerHTML = `
        <div class="message-avatar">ğŸ‘¤</div>
        <div class="message-content">
          <div class="message-bubble">${text}</div>
          <div class="message-time">${new Date().toLocaleTimeString('ja-JP', {hour: '2-digit', minute: '2-digit'})}</div>
        </div>
      `;
      return div;
    }
    
    // ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ä½œæˆ
    function createLoadingMessage() {
      const div = document.createElement('div');
      div.className = 'loading-message message ai';
      div.innerHTML = `
        <div class="message-avatar">ğŸ¤–</div>
        <div class="loading-dots">
          <div class="loading-dot"></div>
          <div class="loading-dot"></div>
          <div class="loading-dot"></div>
        </div>
      `;
      return div;
    }
    
    // AIãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ä½œæˆ
    function createAIMessage() {
      const div = document.createElement('div');
      div.className = 'message ai';
      div.innerHTML = `
        <div class="message-avatar">ğŸ¤–</div>
        <div class="message-content">
          <div class="message-bubble">
            ç¢ºèªã—ã¾ã—ãŸã€‚ãŠç­”ãˆã—ã¾ã™ã€‚
          </div>
          <div class="ai-answer">
            <div class="ai-answer-section">
              <div class="ai-answer-title">ğŸ“Š å›ç­”</div>
              <div class="ai-answer-text">
                ã”è³ªå•ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚ãƒ‡ãƒ¼ã‚¿ã‚’ç¢ºèªã—ã¦ãŠç­”ãˆã—ã¾ã™ã€‚
              </div>
            </div>
          </div>
          <div class="message-actions">
            <button class="feedback-btn" title="å½¹ã«ç«‹ã£ãŸ">ğŸ‘</button>
            <button class="feedback-btn" title="å½¹ã«ç«‹ãŸãªã‹ã£ãŸ">ğŸ‘</button>
          </div>
          <div class="message-time">${new Date().toLocaleTimeString('ja-JP', {hour: '2-digit', minute: '2-digit'})}</div>
        </div>
      `;
      return div;
    }
    
    // éŸ³å£°å…¥åŠ›ï¼ˆãƒ‡ãƒ¢ï¼‰
    function voiceInput() {
      alert('éŸ³å£°å…¥åŠ›æ©Ÿèƒ½ã¯å®Ÿè£…æ™‚ã«è¿½åŠ ã•ã‚Œã¾ã™');
    }
    
    // Enterã‚­ãƒ¼ã§é€ä¿¡
    document.getElementById('chatInput').addEventListener('keydown', function(e) {
      if (e.key === 'Enter' && !e.shiftKey) {
        e.preventDefault();
        sendMessage();
      }
    });
  </script>
</body>
</html>